(this["webpackJsonpsnake-react"]=this["webpackJsonpsnake-react"]||[]).push([[0],{20:function(t,e,n){t.exports=n(36)},25:function(t,e,n){},26:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"setStartGame",(function(){return I}));var o={};n.r(o),n.d(o,"setBoarSize",(function(){return N})),n.d(o,"setFoodPosition",(function(){return M})),n.d(o,"setSnakePosition",(function(){return z}));var r={};n.r(r),n.d(r,"restartGame",(function(){return F}));var i=n(0),c=n.n(i),s=n(9),u=n.n(s),l=(n(25),n(26),n(8)),f=n(2),d=n(5),v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];if(e){if(0!==e)for(var a=t;a<e;a++)n.push(a)}else for(var o=0;o<t;o++)n.push(o);return n},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="";return t.forEach((function(t){return e+=t})),e},m=Object.freeze({X:"x",Y:"y"}),b={x:0,y:0},h=function(){},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h,r=e.x,i=e.y;a(j(t,n)),t.push({x:t[t.length-1].x-r,y:t[t.length-1].y-i}),o(t)},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return{x:e.x-t.x,y:e.y-t.y}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return"x".concat(t.x,"y").concat(t.y)},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.X,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=Object(l.a)({},t);switch(e){case m.X:a.x+=n;break;case m.Y:a.y+=n}return a},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=e.x,a=e.y;return n===t[0].x&&a===t[0].y},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return t.x===e.x&&t.y===e.y},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.findIndex((function(e){return T(e,t)}))},A=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,o=Object(f.a)(e),r=o.length;r>1;r--)o[r-1]={x:o[r-2].x,y:o[r-2].y};o[0].x=t.x,o[0].y=t.y,o[0].x>=n?o[0].x=0:o[0].x<0?o[0].x=n-1:o[0].y>=n?o[0].y=0:o[0].y<0&&(o[0].y=n-1),a(Object(f.a)(o))},j=function t(e,n){var a={x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*n)};return e.findIndex((function(t){return t.x===a.x&&t.y===a.y}))>=0?t(e,n):a},p=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=e.x,a=e.y,o={x:n,y:a},r=!1,i=0;i<4;i++)if(0===i?o={x:n+1,y:a}:1===i?o={x:n-1,y:a}:2===i?o={x:n,y:a+1}:3===i&&(o={x:n,y:a-1}),-1===t.findIndex((function(t){return T(t,o)}))){r=!0;break}return r?o:null},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;return e-=1,t.x>e||t.y>e||t.x<0||t.y<0},G=function(t,e,n,a){if(t.x===e.x&&t.y===e.y)return t;var o,r,i=Object.assign({},t,{x:t.x+1}),c=Object.assign({},t,{x:t.x-1}),s=Object.assign({},t,{y:t.y+1}),u=Object.assign({},t,{y:t.y-1}),l=function(){return t.x>e.x?c:i},f=function(){return t.x>e.x?_(E(t,m.X,-1),n)>=0?i:c:t.x<e.x?_(E(t,m.X,1),n)>=0?c:i:_(E(t,m.X,-1),n)>=0?i:c},d=function(){return t.y>e.y?_(E(t,m.Y,-1),n)>=0?s:u:_(E(t,m.Y,1),n)>=0?u:s};if(t.y===e.y)return o=f(),P(o,a)||n.length>1&&_(o,n)>=0?d():o;if(t.x===e.x)return o=d(),P(o,a)||n.length>1&&_(o,n)>=0?f():o;var v=Math.abs(t.x-e.x),g=Math.abs(t.y-e.y);return v<=g?(o=l(),n.length>1&&_(o,n)>=0?(r=t.x<e.x?c:i,o=l(),n.length>1&&_(o,n)>=0&&-1===_(r,n)&&!P(r,a)?r:d()):o):v>=g?(o=t.y>e.y?u:s,n.length>1&&_(o,n)>=0?(r=t.y<e.y?u:s,o=l(),n.length>1&&_(o,n)>=0&&-1===_(r,n)&&!P(r,a)?r:f()):o):void 0},k=Object.freeze({APP_STATE_SET_START_GAME:"APP_STATE_SET_START_GAME",GAME_STATE_SET_BOARD_SIZE:"GAME_STATE_SET_BOARD_SIZE",GAME_STATE_SET_FOOD_POSITION:"GAME_STATE_SET_FOOD_POSITION",GAME_STATE_SET_SNAKE_POSITION:"GAME_STATE_SET_SNAKE_POSITION"}),I=function(t){return{type:k.APP_STATE_SET_START_GAME,startGame:t}},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return{type:k.GAME_STATE_SET_BOARD_SIZE,boardSize:t}},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return{type:k.GAME_STATE_SET_FOOD_POSITION,foodPosition:t}},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:k.GAME_STATE_SET_SNAKE_POSITION,snakePosition:t}},w=n(6),B=n(3),C=(n(32),Object(w.c)((function(t){return{boardSize:t.gameState.boardSize,foodPosition:t.gameState.foodPosition,snakePosition:t.gameState.snakePosition,startGame:t.appState.startGame}}),(function(t){return{appStateAction:Object(B.b)(a,t),gameStateAction:Object(B.b)(o,t)}}))(c.a.memo((function(t){var e=Object(i.useState)(t.boardSize),n=Object(d.a)(e,2),a=n[0],o=n[1],r=t.timerInterval,s=Object(i.useState)(1),u=Object(d.a)(s,2),m=u[0],E=u[1],P=Object(i.useState)(0),k=Object(d.a)(P,2),I=k[0],N=k[1],M=Object(i.useState)([]),z=Object(d.a)(M,2),w=z[0],B=z[1],C=Object(i.useState)(0),D=Object(d.a)(C,2),R=D[0],F=D[1],X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{gridTemplateColumns:g(v(t).map((function(t){return"auto "})))}}(a),J=Object(i.useState)(t.snakePosition),K=Object(d.a)(J,2),Y=K[0],Z=K[1],W=Object(i.useState)(t.foodPosition),H=Object(d.a)(W,2),$=H[0],q=H[1];Object(i.useEffect)((function(){var e={startGame:!0,snakePosition:t.snakePosition,foodPosition:t.foodPosition};return t.startGame&&U(e),function(){e.startGame=!1}}),[t.startGame,R]),Object(i.useEffect)((function(){t.startGame||(o(t.boardSize),Z([b]),q(j([b],t.boardSize)))}),[t.boardSize]),Object(i.useEffect)((function(){t.startGame||q(t.foodPosition)}),[t.foodPosition]),Object(i.useEffect)((function(){t.startGame||Z(t.snakePosition)}),[t.snakePosition]);var L=Object(f.a)(Y),Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"active";if(0===L.length)return!1;for(var a=!1,o=0;o<L.length&&!1===a;o++)t===L[o].x&&e===L[o].y&&(a=o);return!1!==a?(Y[0].x===L[a].x&&Y[0].y===L[a].y&&(n+="Head"),L.splice(a,1),n):""},U=function(e){for(var n,o,i,c=[],s=[],u=b,v=[],g=e.snakePosition.map((function(t){return Object.assign({},t)})),m=e.snakePosition.map((function(t){return Object.assign({},t)})),E=Object(l.a)({},$),j=Object(f.a)(w),P=!1,k=[],I=function(t){return g=t},N=function(t){return m=t},M=function(t){return E=t},z=function(){!function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,o=Object(f.a)(e),r=0;r<o.length-1;r++)o[r]={x:o[r+1].x,y:o[r+1].y};var i=o.length-1;o[i].x+=t.x,o[i].y+=t.y,o[i].x>=n?o[i].x=0:o[i].x<0?o[i].x=n-1:o[i].y>=n?o[i].y=0:o[i].y<0&&(o[i].y=n-1),a(Object(f.a)(o))}(v.pop(),g,a,I),c.pop()};!P;){if(s[i=y(g[0])]){if(4===s[i].length){z();continue}if(!(o=p(s[i],g[0]))){z();continue}}else s[i]=[],o=G(g[0],E,g,a);s[i].push(Object.assign({},o)),_(o,g)>=0||(u=O(g[0],o),v.push(Object.assign({},u)),c.push(o),k.push([].concat(c).map((function(t){return Object.assign({},t)}))),A(o,g,a,I),x(g,E)&&(P=!0))}var C=t.gameStateAction,D=function(){var t=Object(f.a)(m),e=Object(l.a)({},E);j.length>5&&j.shift(),B([].concat(Object(f.a)(j),[{snakePosition:t,foodPosition:e}])),console.log("history",JSON.stringify(j)),Z(t),q(e),C.setSnakePosition(t),C.setFoodPosition(e),F(R+1)};n=setInterval((function(){if(!1===e.startGame)return clearInterval(n),D(),void console.log("snakePosition",JSON.stringify(Object(f.a)(m)),JSON.stringify(E));var t=c[0];c.shift(),t&&(A(t,m,a,N),Z(Object(f.a)(m)),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=Object(d.a)(t,1),n=e[0],a=t.findIndex((function(t,e){return 0!==e&&T(t,n)}));return a>0}(m)&&(clearInterval(n),D())),0===c.length&&(clearInterval(n),S(m,u,a,M,N),D())}),r)},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"foodActive",a=!1;return t===$.x&&e===$.y&&(a=!0),!1!==a?n:""};return c.a.createElement("div",{onKeyDown:function(t){return function(t,e,n,a,o){switch(t.keyCode){case 38:case 87:1!==n&&(a(0),o(-1));break;case 37:case 65:1!==e&&(a(-1),o(0));break;case 40:case 83:-1!==n&&(a(0),o(1));break;case 39:case 68:-1!==e&&(a(1),o(0))}}(t,m,I,E,N)},className:"board-component-container",style:X,tabIndex:"0"},v(a).map((function(t){return v(a).map((function(e){return c.a.createElement("div",{key:"board-item-".concat(e,"-").concat(t),className:"board-item ".concat(Q(e,t)," ").concat(V(e,t))})}))})))})))),D=(n(33),c.a.memo((function(t){return c.a.createElement("div",{className:"board-container"},t.children)}))),R=(n(34),n(38)),F=function(){return function(t,e){var n=e().gameState;n.startGame||Object(w.b)((function(){var e=j([b],n.boardSize),a=[b];t(M(e)),t(z(a))}))}},X=(n(35),c.a.memo((function(t){return c.a.createElement("div",{className:"range-array"},c.a.createElement("div",{className:"input-container"},c.a.createElement("input",{type:"range",disabled:t.disabled,min:t.min,max:t.max,value:t.value,onChange:t.onChange}),c.a.createElement("input",{className:"input-text",disabled:t.disabled,type:"text",value:t.value,onChange:t.onChange})),t.label&&t.label.length&&c.a.createElement("label",null,t.label))}))),J=Object(w.c)((function(t){return{startGame:t.appState.startGame,boardSize:t.gameState.boardSize}}),(function(t){return{appStateAction:Object(B.b)(a,t),gameBusinessAction:Object(B.b)(r,t),gameStateAction:Object(B.b)(o,t)}}))(c.a.memo((function(t){return c.a.createElement("div",{className:"board-header"},c.a.createElement("div",{className:"board-size-control"},c.a.createElement("div",{className:"text-content"},"Board Size"),c.a.createElement(X,{disabled:t.startGame,value:t.boardSize,min:3,max:100,onChange:function(e){t.gameStateAction.setBoarSize(e.target.value)}})),c.a.createElement(R.a,{className:"start-button",onClick:function(){var e=t.appStateAction,n=t.startGame;e.setStartGame(!n)}},t.startGame?"Stop":"Start"),c.a.createElement(R.a,{disabled:t.startGame,className:"restart-button",onClick:function(){var e=t.gameBusinessAction;t.startGame||e.restartGame()}},"Restart Game"))})));var K=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(D,null,c.a.createElement(J,null),c.a.createElement(C,{timerInterval:200})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(18),Z=n.n(Y),W=n(19),H={startGame:!1},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k.APP_STATE_SET_START_GAME:return Object.assign({},t,{startGame:e.startGame});default:return t}},q={boardSize:15,foodPosition:{x:5,y:5},snakePosition:[{x:0,y:0}]},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k.GAME_STATE_SET_BOARD_SIZE:return Object.assign({},t,{boardSize:e.boardSize});case k.GAME_STATE_SET_FOOD_POSITION:return Object.assign({},t,{foodPosition:e.foodPosition});case k.GAME_STATE_SET_SNAKE_POSITION:return Object.assign({},t,{snakePosition:e.snakePosition});default:return t}},Q=Object(B.c)({appState:$,gameState:L}),U=Object(B.d)(Q,Object(B.a)(W.a,Z.a));u.a.render(c.a.createElement(w.a,{store:U},c.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.9ea8a054.chunk.js.map